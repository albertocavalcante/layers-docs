{
  "path": "/docs/appflow/quickstart/environment",
  "title": "Create an Environment",
  "previousText": "Create an Automation",
  "previousUrl": "/docs/appflow/quickstart/automation",
  "nextText": "Create a Native Configuration",
  "nextUrl": "/docs/appflow/quickstart/native-config",
  "body": [
    "div",
    null,
    [
      "blockquote",
      null,
      " ",
      [
        "p",
        null,
        [
          "b",
          null,
          "Note:"
        ],
        " This feature is only available on our ",
        [
          "a",
          {
            "href": "/pricing"
          },
          "Growth plans"
        ],
        " and above."
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      [
        "stencil-route-link",
        {
          "url": "/docs/appflow/automation/environments"
        },
        "Environments"
      ],
      " are a powerful way to customize your ",
      [
        "stencil-route-link",
        {
          "url": "/docs/appflow/package/builds"
        },
        "Package builds"
      ],
      " and ",
      [
        "stencil-route-link",
        {
          "url": "/docs/appflow/deploy/builds"
        },
        "Deploy builds"
      ],
      " in order create different configurations based on the environment variables\npassed in at build time. When combined with the ",
      [
        "stencil-route-link",
        {
          "url": "/docs/appflow/automation/intro"
        },
        "Automation"
      ],
      " feature, development teams can\neasily configure development, staging, and production build configurations, allowing them to embrace DevOps\nbest practices and ship better quality updates faster than ever."
    ],
    " ",
    [
      "h2",
      {
        "id": "create-an-environment"
      },
      " ",
      [
        "a",
        {
          "href": "#create-an-environment"
        },
        "Create an Environment"
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "To create an environment, simply go to the ",
      [
        "code",
        null,
        "Automate > Environments"
      ],
      " tab in the sidebar of the Appflow Dashboard and\nclick the ",
      [
        "code",
        null,
        "New Environment"
      ],
      " button in the top right."
    ],
    " ",
    [
      "p",
      null,
      [
        "img",
        {
          "src": "/docs/assets/img/appflow/ss-new-environment.png",
          "alt": "New Environment"
        }
      ]
    ],
    " ",
    [
      "p",
      null,
      "You'll then see a form that allows you to create two types of environment variables:"
    ],
    " ",
    [
      "ul",
      null,
      " ",
      [
        "li",
        null,
        [
          "b",
          null,
          "Secrets"
        ],
        " - These values are encypted and only available at build time. Once you save a secret, ",
        [
          "em",
          null,
          "you will be unable to edit or see it again"
        ],
        "."
      ],
      " ",
      [
        "li",
        null,
        [
          "b",
          null,
          "Variables"
        ],
        " - These values are available at build time. Variables are visible and editable."
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "Let's create a new Environment called \"Development\". For this environment, create a variable named ",
      [
        "code",
        null,
        "BUILD_ENV"
      ],
      " with the value ",
      [
        "code",
        null,
        "development"
      ],
      ". This variable will allow us to customize the way our builds are configured."
    ],
    " ",
    [
      "p",
      null,
      [
        "img",
        {
          "src": "/docs/assets/img/appflow/gif-new-environment.gif",
          "alt": "New Environment Form"
        }
      ]
    ],
    " ",
    [
      "h2",
      {
        "id": "add-the-environment-to-an-automation"
      },
      " ",
      [
        "a",
        {
          "href": "#add-the-environment-to-an-automation"
        },
        "Add the Environment to an Automation"
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "To take full advantage of automating your development environment, you'll want to add the environment to the automation\nwe created earlier. "
    ],
    " ",
    [
      "p",
      null,
      "In your ",
      [
        "code",
        null,
        "Automations"
      ],
      " tab, click ",
      [
        "code",
        null,
        "Edit"
      ],
      " from the ",
      [
        "code",
        null,
        "Options"
      ],
      " icon on the right of your automation, select the environment from\nthe ",
      [
        "code",
        null,
        "Environment"
      ],
      " dropdown and click ",
      [
        "code",
        null,
        "Save"
      ],
      "."
    ],
    " ",
    [
      "p",
      null,
      [
        "img",
        {
          "src": "/docs/assets/img/appflow/gif-add-environment.gif",
          "alt": "Add Environment to Automation"
        }
      ]
    ],
    " ",
    [
      "h2",
      {
        "id": "example-customizing-the-build-script"
      },
      " ",
      [
        "a",
        {
          "href": "#example-customizing-the-build-script"
        },
        "Example: Customizing the Build Script"
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "Getting the variable into your builds is one thing, but using them to customize the way your build is\nconfigured is just as important. "
    ],
    " ",
    [
      "p",
      null,
      "Here are examples of how you might customize your app using the ",
      [
        "code",
        null,
        "BUILD_ENV"
      ],
      " variable we created above in order to connect to a different API url to fetch the data for your app when\ndeveloping locally vs. in your ",
      [
        "code",
        null,
        "development"
      ],
      " environment."
    ],
    " ",
    [
      "docs-tabs",
      null,
      " ",
      [
        "docs-tab",
        {
          "tab": "Ionic v4"
        },
        " First, you can modify the ",
        [
          "code",
          null,
          "build"
        ],
        " script in your ",
        [
          "code",
          null,
          "package.json"
        ],
        " to either use the ",
        [
          "code",
          null,
          "BUILD_ENV"
        ],
        " variable if it\nexists or to default it to ",
        [
          "code",
          null,
          "local"
        ],
        " and then choose the configuration from the ",
        [
          "code",
          null,
          "angular.json"
        ],
        " file that matches the value\nof ",
        [
          "code",
          null,
          "BUILD_ENV"
        ],
        " (",
        [
          "code",
          null,
          "development"
        ],
        " in Appflow & ",
        [
          "code",
          null,
          "local"
        ],
        " locally). ",
        [
          "docs-code",
          {
            "language": "json"
          },
          " ",
          [
            "pre",
            null,
            [
              "code",
              null,
              "...\n",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"scripts\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  ...\n  ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"build\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "\"BUILD_ENV=${BUILD_ENV:-local} ng build --configuration=$BUILD_ENV\""
              ],
              "\n  ...\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              "\n..."
            ]
          ],
          " "
        ],
        " ",
        [
          "p",
          null,
          "Here's what your ",
          [
            "code",
            null,
            "angular.json"
          ],
          " configurations section might look like."
        ],
        " ",
        [
          "docs-code",
          {
            "language": "json"
          },
          " ",
          [
            "pre",
            null,
            [
              "code",
              null,
              "...\n",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"configurations\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  ... ",
              [
                "span",
                {
                  "class": "token comment"
                },
                "// other environment configurations"
              ],
              "\n  ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"development\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n    ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"fileReplacements\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "["
              ],
              " ",
              [
                "span",
                {
                  "class": "token comment"
                },
                "// replace default environment.ts file with the environment.development.ts file"
              ],
              "\n      ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n        ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"replace\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "\"src/environments/environment.ts\""
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ","
              ],
              "\n        ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"with\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "\"src/environments/environment.development.ts\""
              ],
              "\n      ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              "\n    ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "]"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ","
              ],
              "\n  ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ","
              ],
              "\n  ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"local\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ","
              ],
              " ",
              [
                "span",
                {
                  "class": "token comment"
                },
                "// leave this blank to use the default src/environments/environment.ts file"
              ],
              "\n  ...\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              "\n"
            ]
          ],
          " "
        ],
        " ",
        [
          "p",
          null,
          "Here's what the ",
          [
            "code",
            null,
            "environment.ts"
          ],
          " and ",
          [
            "code",
            null,
            "environment.development.ts"
          ],
          " files might look like."
        ],
        " ",
        [
          "docs-code",
          {
            "language": "typescript"
          },
          " ",
          [
            "pre",
            null,
            [
              "code",
              null,
              [
                "span",
                {
                  "class": "token comment"
                },
                "// src/environments/environments.development.ts"
              ],
              "\n",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "export"
              ],
              " ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "const"
              ],
              " environment ",
              [
                "span",
                {
                  "class": "token operator"
                },
                "="
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  apiUrl",
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "'https://api.development.com'"
              ],
              "\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n"
            ]
          ],
          " "
        ],
        " ",
        [
          "docs-code",
          {
            "language": "typescript"
          },
          " ",
          [
            "pre",
            null,
            [
              "code",
              null,
              [
                "span",
                {
                  "class": "token comment"
                },
                "// src/environments/environments.ts"
              ],
              "\n",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "export"
              ],
              " ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "const"
              ],
              " environment ",
              [
                "span",
                {
                  "class": "token operator"
                },
                "="
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  apiUrl",
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "'http://localhost:8000'"
              ],
              "\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n"
            ]
          ],
          " "
        ],
        " "
      ],
      " ",
      [
        "docs-tab",
        {
          "tab": "Ionic v3"
        },
        " First you can modify the ",
        [
          "code",
          null,
          "build"
        ],
        " script in your ",
        [
          "code",
          null,
          "package.json"
        ],
        " to either use the ",
        [
          "code",
          null,
          "BUILD_ENV"
        ],
        " variable if it\nexists or default to ",
        [
          "code",
          null,
          "local"
        ],
        ". ",
        [
          "docs-code",
          {
            "language": "json"
          },
          " ",
          [
            "pre",
            null,
            [
              "code",
              null,
              "...\n",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"scripts\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  ...\n  ",
              [
                "span",
                {
                  "class": "token property"
                },
                "\"build\""
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "\"BUILD_ENV=${BUILD_ENV:-local} ionic-app-scripts build\""
              ],
              "\n  ...\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              "\n..."
            ]
          ],
          " "
        ],
        " ",
        [
          "p",
          null,
          "Then you can use it directly in an ",
          [
            "code",
            null,
            "environments.ts"
          ],
          " module to properly\nset the API url based on the value of ",
          [
            "code",
            null,
            "BUILD_ENV"
          ],
          " (",
          [
            "code",
            null,
            "development"
          ],
          " in Appflow & ",
          [
            "code",
            null,
            "local"
          ],
          " locally)."
        ],
        " ",
        [
          "docs-code",
          {
            "language": "typescript"
          },
          " ",
          [
            "pre",
            null,
            [
              "code",
              null,
              [
                "span",
                {
                  "class": "token keyword"
                },
                "let"
              ],
              " apiUrl",
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " ",
              [
                "span",
                {
                  "class": "token builtin"
                },
                "string"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n\n",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "switch"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "("
              ],
              "process",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "."
              ],
              "env",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "."
              ],
              [
                "span",
                {
                  "class": "token constant"
                },
                "BUILD_ENV"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ")"
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "case"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "'development'"
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              "\n    apiUrl ",
              [
                "span",
                {
                  "class": "token operator"
                },
                "="
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "'https://api.development.com'"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n    ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "break"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n  ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "case"
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "'local'"
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              "\n    apiUrl ",
              [
                "span",
                {
                  "class": "token operator"
                },
                "="
              ],
              " ",
              [
                "span",
                {
                  "class": "token string"
                },
                "'http://localhost:8000'"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n    ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "break"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n  ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "default"
              ],
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              "\n    ",
              [
                "span",
                {
                  "class": "token builtin"
                },
                "console"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "."
              ],
              [
                "span",
                {
                  "class": "token function"
                },
                "warn"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "("
              ],
              [
                "span",
                {
                  "class": "token template-string"
                },
                [
                  "span",
                  {
                    "class": "token template-punctuation string"
                  },
                  "`"
                ],
                [
                  "span",
                  {
                    "class": "token string"
                  },
                  "Unknown environment "
                ],
                [
                  "span",
                  {
                    "class": "token interpolation"
                  },
                  [
                    "span",
                    {
                      "class": "token interpolation-punctuation punctuation"
                    },
                    "${"
                  ],
                  "process",
                  [
                    "span",
                    {
                      "class": "token punctuation"
                    },
                    "."
                  ],
                  "env",
                  [
                    "span",
                    {
                      "class": "token punctuation"
                    },
                    "."
                  ],
                  [
                    "span",
                    {
                      "class": "token constant"
                    },
                    "BUILD_ENV"
                  ],
                  [
                    "span",
                    {
                      "class": "token interpolation-punctuation punctuation"
                    },
                    "}"
                  ]
                ],
                [
                  "span",
                  {
                    "class": "token string"
                  },
                  " specified."
                ],
                [
                  "span",
                  {
                    "class": "token template-punctuation string"
                  },
                  "`"
                ]
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ")"
              ],
              "\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              "\n\n",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "export"
              ],
              " ",
              [
                "span",
                {
                  "class": "token keyword"
                },
                "const"
              ],
              " environment ",
              [
                "span",
                {
                  "class": "token operator"
                },
                "="
              ],
              " ",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "{"
              ],
              "\n  apiUrl",
              [
                "span",
                {
                  "class": "token operator"
                },
                ":"
              ],
              " apiUrl\n",
              [
                "span",
                {
                  "class": "token punctuation"
                },
                "}"
              ],
              [
                "span",
                {
                  "class": "token punctuation"
                },
                ";"
              ],
              "\n"
            ]
          ],
          " "
        ],
        " "
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "Now your apps will automatically use a different API to fetch data locally vs in your development builds! 💪"
    ]
  ],
  "headings": [
    {
      "text": "Create an Environment",
      "href": "#create-an-environment"
    },
    {
      "text": "Add the Environment to an Automation",
      "href": "#add-the-environment-to-an-automation"
    },
    {
      "text": "Example: Customizing the Build Script",
      "href": "#example-customizing-the-build-script"
    }
  ],
  "pageClass": "page-appflow-quickstart-environment"
}
