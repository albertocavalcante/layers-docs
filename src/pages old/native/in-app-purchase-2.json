{
  "title": "In App Purchase 2",
  "path": "/docs/native/in-app-purchase-2",
  "body": [
    "div",
    null,
    [
      "p",
      {
        "class": "intro"
      },
      "In-App Purchase on iOS, Android, Windows, macOS and XBox."
    ],
    " ",
    [
      "h2",
      {
        "id": "features"
      },
      " ",
      [
        "a",
        {
          "href": "#features"
        },
        "Features"
      ],
      " "
    ],
    " ",
    [
      "table",
      null,
      " ",
      [
        "thead",
        null,
        " ",
        [
          "tr",
          null,
          " ",
          [
            "th",
            null
          ],
          " ",
          [
            "th",
            null,
            "ios"
          ],
          " ",
          [
            "th",
            null,
            "android"
          ],
          " ",
          [
            "th",
            null,
            "win-8"
          ],
          " ",
          [
            "th",
            null,
            "win-10/uwp"
          ],
          " ",
          [
            "th",
            null,
            "mac"
          ],
          " "
        ],
        " "
      ],
      " ",
      [
        "tbody",
        null,
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "consumables"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " ",
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "non consumables"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " ",
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "subscriptions"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " ",
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "restore purchases"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " ",
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "receipt validations"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " ",
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "downloadable content"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null
          ],
          " ",
          [
            "td",
            null
          ],
          " ",
          [
            "td",
            null
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " ",
        [
          "tr",
          null,
          " ",
          [
            "td",
            null,
            "introductory prices"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " ",
          [
            "td",
            null,
            "✅"
          ],
          " "
        ],
        " "
      ]
    ],
    " ",
    [
      "p",
      null,
      "Supports:"
    ],
    " ",
    [
      "ul",
      null,
      " ",
      [
        "li",
        null,
        [
          "strong",
          null,
          "iOS"
        ],
        " version 7.0 or higher."
      ],
      " ",
      [
        "li",
        null,
        [
          "strong",
          null,
          "Android"
        ],
        " version 2.2 (API level 8) or higher",
        [
          "ul",
          null,
          " ",
          [
            "li",
            null,
            "with Google Play client version 3.9.16 or higher"
          ],
          " "
        ],
        " "
      ],
      " ",
      [
        "li",
        null,
        [
          "strong",
          null,
          "Windows"
        ],
        " Store/Phone 8.1 or higher"
      ],
      " ",
      [
        "li",
        null,
        [
          "strong",
          null,
          "Windows 10 Mobile"
        ]
      ],
      " ",
      [
        "li",
        null,
        [
          "strong",
          null,
          "macOS"
        ],
        " version 10"
      ],
      " ",
      [
        "li",
        null,
        [
          "strong",
          null,
          "Xbox One"
        ],
        [
          "ul",
          null,
          " ",
          [
            "li",
            null,
            "(and any platform supporting Microsoft's UWP)"
          ],
          " "
        ],
        " "
      ],
      " "
    ]
  ],
  "repo": "https://github.com/j3k0/cordova-plugin-purchase",
  "platforms": [
    "iOS",
    "Android",
    "Windows"
  ],
  "codeUsage": [
    "div",
    null,
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "import"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          " InAppPurchase2 ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "from"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "'@ionic-native/in-app-purchase-2/ngx'"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n",
          [
            "span",
            {
              "class": "token keyword"
            },
            "constructor"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            [
              "span",
              {
                "class": "token keyword"
              },
              "public"
            ],
            " platform",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " Platform",
            [
              "span",
              {
                "class": "token punctuation"
              },
              ","
            ],
            " ",
            [
              "span",
              {
                "class": "token keyword"
              },
              "private"
            ],
            " store",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " InAppPurchase2"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n  platform",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "ready"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "then"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "register"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n     id",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n     ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "type"
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token constant"
            },
            "NON_RENEWING_SUBSCRIPTION"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          "\n     ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "approved"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "p"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " p",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "verify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          "\n     ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "verified"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "p"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " p",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "finish"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "refresh"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          "\n\n",
          [
            "span",
            {
              "class": "token operator"
            },
            "..."
          ],
          "\n\n",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "order"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n"
        ]
      ],
      "\n"
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "full-example"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#full-example"
        },
        "Full example"
      ],
      "\n    "
    ],
    "\n  \n",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          " ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// After platform ready"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "verbosity ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token constant"
            },
            "DEBUG"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "register"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   id",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "type"
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token constant"
            },
            "PAID_SUBSCRIPTION"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// Register event handlers for the specific product"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "registered"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "product",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "log"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "'Registered: '"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "+"
          ],
          " ",
          [
            "span",
            {
              "class": "token constant"
            },
            "JSON"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "stringify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "product",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// Updated"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "updated"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "product",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "log"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "'Updated'"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "+"
          ],
          " ",
          [
            "span",
            {
              "class": "token constant"
            },
            "JSON"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "stringify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "product",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// User closed the native purchase dialog"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "cancelled"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "product"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n     ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "error"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "'Purchase was Cancelled'"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// Track all store errors"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "error"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "err"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "error"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "'Store Error '"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "+"
          ],
          " ",
          [
            "span",
            {
              "class": "token constant"
            },
            "JSON"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "stringify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "err",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// Run some code only when the store is ready to be used"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "ready"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          "  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "log"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "'Store is ready'"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "log"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "'Products: '"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "+"
          ],
          " ",
          [
            "span",
            {
              "class": "token constant"
            },
            "JSON"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "stringify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "products",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "console"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "log"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token constant"
            },
            "JSON"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "stringify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token keyword"
            },
            "get"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// Refresh the status of in-app products"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "refresh"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token operator"
            },
            "..."
          ],
          "\n\n ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// To make a purchase"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "order"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_product_id\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n"
        ]
      ],
      "\n"
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "philosophy"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#philosophy"
        },
        "Philosophy"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "The API is mostly events based. As a user of this plugin,\nyou will have to register listeners to changes happening to the products\nyou register."
    ],
    "\n",
    [
      "p",
      null,
      "The core of the listening mechanism is the ",
      [
        "code",
        null,
        "when()"
      ],
      " method. It allows you to\nbe notified of changes to one or a set of products using a query mechanism:"
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"product\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "updated"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "refreshScreen",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          " ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// match any product"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"full_version\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "owned"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "unlockApp",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          " ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// match a specific product"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"subscription\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "approved"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "serverCheck",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          " ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// match all subscriptions"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"downloadable content\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "downloaded"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "showContent",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      "The ",
      [
        "code",
        null,
        "updated"
      ],
      " event is fired whenever one of the fields of a product is\nchanged (its ",
      [
        "code",
        null,
        "owned"
      ],
      " status for instance)."
    ],
    "\n",
    [
      "p",
      null,
      "This event provides a generic way to track the statuses of your purchases,\nto unlock features when needed and to refresh your views accordingly."
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "registering-products"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#registering-products"
        },
        "Registering products"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "The store needs to know the type and identifiers of your products before you\ncan use them in your code."
    ],
    "\n",
    [
      "p",
      null,
      "Use ",
      [
        "code",
        null,
        "store.register()"
      ],
      " to define them before your first call to ",
      [
        "code",
        null,
        "store.refresh()"
      ],
      "."
    ],
    "\n",
    [
      "p",
      null,
      "Once registered, you can use ",
      [
        "code",
        null,
        "store.get()"
      ],
      " to retrieve an ",
      [
        "code",
        null,
        "IAPProduct"
      ],
      " object."
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "register"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n   id",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_consumable1\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n   ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "type"
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token constant"
            },
            "CONSUMABLE"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n ",
          [
            "span",
            {
              "class": "token operator"
            },
            "..."
          ],
          "\n ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " p ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token keyword"
            },
            "get"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_consumable1\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      "The product ",
      [
        "code",
        null,
        "id"
      ],
      " and ",
      [
        "code",
        null,
        "type"
      ],
      " have to match products defined in your\nApple, Google or Microsoft developer consoles."
    ],
    "\n",
    [
      "p",
      null,
      "Learn more about it ",
      [
        "a",
        {
          "href": "https://github.com/j3k0/cordova-plugin-purchase/wiki"
        },
        "from the wiki"
      ],
      "."
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "displaying-products"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#displaying-products"
        },
        "Displaying products"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "Right after you registered your products, nothing much is known about them\nexcept their ",
      [
        "code",
        null,
        "id"
      ],
      ", ",
      [
        "code",
        null,
        "type"
      ],
      " and an optional ",
      [
        "code",
        null,
        "alias"
      ],
      "."
    ],
    "\n",
    [
      "p",
      null,
      "When you perform the initial call to ",
      [
        "code",
        null,
        "store.refresh()"
      ],
      ", the platforms' server will\nbe contacted to load informations about the registered products: human\nreadable ",
      [
        "code",
        null,
        "title"
      ],
      " and ",
      [
        "code",
        null,
        "description"
      ],
      ", ",
      [
        "code",
        null,
        "price"
      ],
      ", etc."
    ],
    "\n",
    [
      "p",
      null,
      "This isn't an optional step, store owners require you\nto display information about a product exactly as retrieved from their server: no\nhard-coding of price and title allowed! This is also convenient for you\nas you can change the price of your items knowing that it'll be reflected instantly\non your clients' devices."
    ],
    "\n",
    [
      "p",
      null,
      "Note that the information may not be available when the first view that needs\nthem appears on screen. For you, the best option is to have your view monitor\nchanges made to the product."
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "purchasing"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#purchasing"
        },
        "Purchasing"
      ],
      "\n    "
    ],
    "\n  \n    ",
    [
      "h4",
      {
        "id": "initiate-a-purchase"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#initiate-a-purchase"
        },
        "initiate a purchase"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "Purchases are initiated using the ",
      [
        "code",
        null,
        "store.order(\"some_product_id\")"
      ],
      " method."
    ],
    "\n",
    [
      "p",
      null,
      "The store will manage the internal purchase flow. It'll end:"
    ],
    "\n",
    [
      "ul",
      null,
      "\n",
      [
        "li",
        null,
        "with an ",
        [
          "code",
          null,
          "approved"
        ],
        " event. The product enters the ",
        [
          "code",
          null,
          "APPROVED"
        ],
        " state."
      ],
      "\n",
      [
        "li",
        null,
        "with a ",
        [
          "code",
          null,
          "cancelled"
        ],
        " event. The product gets back to the ",
        [
          "code",
          null,
          "VALID"
        ],
        " state."
      ],
      "\n",
      [
        "li",
        null,
        "with an ",
        [
          "code",
          null,
          "error"
        ],
        " event. The product gets back to the ",
        [
          "code",
          null,
          "VALID"
        ],
        " state."
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      "See the product life-cycle section for details about product states."
    ],
    "\n\n    ",
    [
      "h4",
      {
        "id": "finish-a-purchase"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#finish-a-purchase"
        },
        "finish a purchase"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "Once the transaction is approved, the product still isn't owned: the store needs\nconfirmation that the purchase was delivered before closing the transaction."
    ],
    "\n",
    [
      "p",
      null,
      "To confirm delivery, you'll use the ",
      [
        "code",
        null,
        "product.finish()"
      ],
      " method."
    ],
    "\n\n    ",
    [
      "h4",
      {
        "id": "example-usage"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#example-usage"
        },
        "example usage"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "During initialization:"
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"extra_chapter\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "approved"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "product",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// download the feature"
          ],
          "\n  app",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "downloadExtraChapter"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "then"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " product",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "finish"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      "When the purchase button is clicked:"
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "order"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"extra_chapter\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n\n    ",
    [
      "h4",
      {
        "id": "un-finished-purchases"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#un-finished-purchases"
        },
        "un-finished purchases"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "If your app wasn't able to deliver the content, ",
      [
        "code",
        null,
        "product.finish()"
      ],
      " won't be called."
    ],
    "\n",
    [
      "p",
      null,
      "Don't worry: the ",
      [
        "code",
        null,
        "approved"
      ],
      " event will be re-triggered the next time you\ncall ",
      [
        "code",
        null,
        "store.refresh()"
      ],
      ", which can very well be the next time\nthe application starts. Pending transactions are persistant."
    ],
    "\n\n    ",
    [
      "h4",
      {
        "id": "simple-case"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#simple-case"
        },
        "simple case"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "In the most simple case, where:"
    ],
    "\n",
    [
      "ul",
      null,
      "\n",
      [
        "li",
        null,
        "delivery of purchases is only local ;"
      ],
      "\n",
      [
        "li",
        null,
        "you don't want (or need) to implement receipt validation ;"
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      "You may just want to finish all purchases automatically. You can do it this way:"
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "js"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"product\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "approved"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "p",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " p",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "finish"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      "NOTE: the \"product\" query will match any purchases (see \"queries\" to learn more details about queries)."
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "receipt-validation"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#receipt-validation"
        },
        "Receipt validation"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "To get the most up-to-date information about purchases (in case a purchase have been canceled, or a subscription renewed),\nyou should implement server side receipt validation."
    ],
    "\n",
    [
      "p",
      null,
      "This also protects you against fake \"purchases\", made by some users using\n\"free in-app purchase\" apps on their devices."
    ],
    "\n",
    [
      "p",
      null,
      "When a purchase has been approved by the store, it's enriched with\ntransaction information (see ",
      [
        "code",
        null,
        "product.transaction"
      ],
      " attribute)."
    ],
    "\n",
    [
      "p",
      null,
      "To verify a purchase you'll have to do three things:"
    ],
    "\n",
    [
      "ul",
      null,
      "\n",
      [
        "li",
        null,
        "configure the validator."
      ],
      "\n",
      [
        "li",
        null,
        "call ",
        [
          "code",
          null,
          "product.verify()"
        ],
        " from the ",
        [
          "code",
          null,
          "approved"
        ],
        " event, before finishing the transaction."
      ],
      "\n",
      [
        "li",
        null,
        "finish the transaction when transaction is ",
        [
          "code",
          null,
          "verified"
        ],
        "."
      ],
      "\n"
    ],
    "\n",
    [
      "p",
      null,
      [
        "strong",
        null,
        "Shameless Plug"
      ],
      ": this is a feature many users struggle with, so as the author of this plugin, we can provide it to you as-a-service: ",
      [
        "a",
        {
          "href": "https://billing.fovea.cc/"
        },
        "https://billing.fovea.cc/"
      ],
      "\n(which is free until you start making serious money)"
    ],
    "\n\n    ",
    [
      "h4",
      {
        "id": "example-using-a-validation-url"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#example-using-a-validation-url"
        },
        "example using a validation URL"
      ],
      "\n    "
    ],
    "\n  \n",
    [
      "docs-code",
      {
        "language": "js"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "validator ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"https://billing.fovea.cc/\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n",
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my stuff\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "approved"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "p",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " p",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "verify"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "verified"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "p",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " p",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "finish"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "subscriptions"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#subscriptions"
        },
        "Subscriptions"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "For subscription, you MUST implement remote receipt validation."
    ],
    "\n",
    [
      "p",
      null,
      "When the receipt validator returns a ",
      [
        "code",
        null,
        "store.PURCHASE_EXPIRED"
      ],
      " error code, the subscription will\nautomatically loose its ",
      [
        "code",
        null,
        "owned"
      ],
      " status."
    ],
    "\n",
    [
      "p",
      null,
      "Typically, you'll enable and disable access to your content this way."
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "this"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "store",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "when"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token string"
            },
            "\"my_subcription\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "updated"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token parameter"
            },
            "product",
            [
              "span",
              {
                "class": "token operator"
              },
              ":"
            ],
            " IAPProduct"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "if"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "product",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "owned",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          "\n    app",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "subscriberMode"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "else"
          ],
          "\n    app",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "guestMode"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      "\n"
    ],
    "\n\n    ",
    [
      "h2",
      {
        "id": "product-life-cycle"
      },
      "\n      ",
      [
        "a",
        {
          "href": "#product-life-cycle"
        },
        "Product life-cycle"
      ],
      "\n    "
    ],
    "\n  ",
    [
      "p",
      null,
      "A product will change state during the application execution."
    ],
    "\n",
    [
      "p",
      null,
      "Find below a diagram of the different states a product can pass by."
    ],
    "\n\n",
    [
      "docs-code",
      {
        "language": "null"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          "REGISTERED +--> INVALID\n           |\n           +--> VALID +--> REQUESTED +--> INITIATED +-+\n                                                      |\n                ^      +------------------------------+\n                |      |\n                |      |             +--> DOWNLOADING +--> DOWNLOADED +\n                |      |             |                                |\n                |      +--> APPROVED +--------------------------------+--> FINISHED +--> OWNED\n                |                                                             |\n                +-------------------------------------------------------------+\n\n#### Notes\n\n - When finished, a consumable product will get back to the `VALID` state, while other will enter the `OWNED` state.\n - Any error in the purchase process will bring a product back to the `VALID` state.\n - During application startup, products may go instantly from `REGISTERED` to `APPROVED` or `OWNED`, for example if they are purchased non-consumables or non-expired subscriptions.\n - Non-Renewing Subscriptions are iOS products only. Please see the [iOS Non Renewing Subscriptions documentation](https://github.com/j3k0/cordova-plugin-purchase/blob/master/doc/ios.md#non-renewing) for a detailed explanation.\n\n## events\n\n - `loaded(IAPProduct)`\n   - Called when product data is loaded from the store.\n - `updated(IAPProduct)`\n   - Called when any change occured to a product.\n - `error(err)`\n   - Called when an order failed.\n   - The `err` parameter is an error object\n - `approved(IAPProduct)`\n   - Called when a product order is approved.\n - `owned(IAPProduct)`\n   - Called when a non-consumable product or subscription is owned.\n - `cancelled(IAPProduct)`\n   - Called when a product order is cancelled by the user.\n - `refunded(IAPProduct)`\n   - Called when an order is refunded by the user.\n - Actually, all other product states have their promise\n   - `registered`, `valid`, `invalid`, `requested`,\n     `initiated` and `finished`\n - `verified(IAPProduct)`\n   - Called when receipt validation successful\n - `unverified(IAPProduct)`\n   - Called when receipt verification failed\n - `expired(IAPProduct)`\n   - Called when validation find a subscription to be expired\n - `downloading(IAPProduct, progress, time_remaining)`\n   - Called when content download is started\n - `downloaded(IAPProduct)`\n   - Called when content download has successfully completed\n\n## Learn More\n\n - [GitHub](https://github.com/j3k0/cordova-plugin-purchase)\n - [GitBook](https://purchase.cordova.fovea.cc/)\n - [Wiki](https://github.com/j3k0/cordova-plugin-purchase/wiki)\n - [API reference](https://github.com/j3k0/cordova-plugin-purchase/blob/master/doc/api.md)\n\n## Technical Support or Questions\n\nIf you have questions or need help integrating In-App Purchase, [Open an Issue on GitHub](https://github.com/j3k0/cordova-plugin-purchase/issues) or email us at _support@fovea.cc_.\n\n@interfaces\nIAPProduct\nIAPProductOptions\nIAPProductEvents"
        ]
      ],
      "\n"
    ]
  ],
  "package": "@ionic-native/in-app-purchase-2",
  "cordova": "cc.fovea.cordova.purchase",
  "capacitorIncompatible": false,
  "premierSlug": null,
  "template": "native",
  "headings": [
    {
      "text": "Features",
      "href": "#features"
    }
  ],
  "pageClass": "page-native-in-app-purchase-2"
}
