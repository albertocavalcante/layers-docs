import{m as e,w as t,r as s,i as n,h as i,H as o,c as r}from"./p-72181234.js";import{c as a}from"./p-c50237ed.js";const l=e=>{const t=document.querySelector(`${e}.ion-cloned-element`);if(null!==t)return t;const s=document.createElement(e);return s.classList.add("ion-cloned-element"),s.style.setProperty("display","none"),document.body.appendChild(s),s},c=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map(e=>{const t=e.querySelector("ion-title");return{el:e,background:e.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:t,innerTitleEl:t?t.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(e.querySelectorAll("ion-buttons"))||[]}})||[]}},h=(e,t)=>{void 0===t?e.background.style.removeProperty("--opacity"):e.background.style.setProperty("--opacity",t.toString())},d=(e,t=!0)=>{t?e.el.classList.remove("header-collapse-condense-inactive"):e.el.classList.add("header-collapse-condense-inactive")},u=class{constructor(e){s(this,e),this.collapsibleHeaderInitialized=!1,this.translucent=!1}async componentDidLoad(){await this.checkCollapsibleHeader()}async componentDidUpdate(){await this.checkCollapsibleHeader()}componentDidUnload(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){const e="condense"===this.collapse,t=!(!e||"ios"!==n(this))&&e;if(!t&&this.collapsibleHeaderInitialized)this.destroyCollapsibleHeader();else if(t&&!this.collapsibleHeaderInitialized){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?e.querySelector("ion-content"):null;await this.setupCollapsibleHeader(t,e)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCollapsibleHeader(s,n){if(!s||!n)return void console.error("ion-header requires a content to collapse, make sure there is an ion-content.");if("undefined"==typeof IntersectionObserver)return;this.scrollEl=await s.getScrollElement();const i=n.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(i).find(e=>"condense"!==e.collapse),!this.collapsibleMainHeader)return;const o=c(this.collapsibleMainHeader),r=c(this.el);o&&r&&(d(o,!1),o.toolbars.forEach(e=>{h(e,0)}),this.intersectionObserver=new IntersectionObserver(e=>{((e,s,n)=>{t(()=>{((e,t)=>{if(!e[0].isIntersecting)return;const s=e[0].intersectionRatio>.9?0:100*(1-e[0].intersectionRatio)/75;t.toolbars.forEach(e=>{h(e,1===s?void 0:s)})})(e,s);const t=e[0],i=t.intersectionRect,o=i.width*i.height,r=0===o&&0==t.rootBounds.width*t.rootBounds.height,a=Math.abs(i.left-t.boundingClientRect.left),l=Math.abs(i.right-t.boundingClientRect.right);r||o>0&&(a>=5||l>=5)||(t.isIntersecting?(d(s,!1),d(n)):(0===i.x&&0===i.y||0!==i.width&&0!==i.height)&&(d(s),d(n,!1),h(s.toolbars[0])))})})(e,o,r)},{root:s,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{((s,n,i)=>{e(()=>{const e=a(1,1+-s.scrollTop/500,1.1);null===i.querySelector("ion-refresher.refresher-native")&&t(()=>{((e=[],t=1,s=!1)=>{e.forEach(e=>{const n=e.ionTitleEl,i=e.innerTitleEl;n&&"large"===n.size&&(i.style.transformOrigin="left center",i.style.transition=s?"all 0.2s ease-in-out":"",i.style.transform=`scale3d(${t}, ${t}, 1)`)})})(n.toolbars,e)})})})(this.scrollEl,r,s)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),t(()=>{l("ion-title").size="large",l("ion-back-button"),void 0!==this.collapsibleMainHeader&&this.collapsibleMainHeader.classList.add("header-collapse-main")}),this.collapsibleHeaderInitialized=!0)}render(){const{translucent:e}=this,t=n(this);return i(o,{role:"banner",class:{[t]:!0,[`header-${t}`]:!0,"header-translucent":this.translucent,[`header-collapse-${this.collapse||"none"}`]:!0,[`header-translucent-${t}`]:this.translucent}},"ios"===t&&e&&i("div",{class:"header-background"}),i("slot",null))}get el(){return r(this)}static get style(){return"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top,0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}\@supports ((-webkit-backdrop-filter:blur(0)) or (backdrop-filter:blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color,#fff);z-index:0}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0;padding-bottom:13px}.header-collapse-main ion-toolbar.in-toolbar ion-buttons,.header-collapse-main ion-toolbar.in-toolbar ion-title{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title{visibility:hidden}"}};export{u as ion_header};